<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fresh - 聊天室</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ionicons@5.5.2/dist/ionicons/ionicons.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/chat.css">
</head>
<body>
    <div class="container">
        <!-- 導航欄 -->
        <nav class="nav">
            <div class="nav-left">
                <a href="home.html" class="logo">fresh</a>
            </div>
            <div class="nav-right">
                <div class="home-avatar-wrap" style="display:inline-block;vertical-align:middle;margin-right:16px;">
                    <img id="home-avatar" src="https://via.placeholder.com/100" alt="個人頭像" style="width:50px;height:50px;border-radius:50%;object-fit:cover;border:2px solid #ff6b00;">
                </div>
                <div class="auth-buttons" style="display:flex;align-items:center;gap:8px;vertical-align:middle;">
                    <a href="home.html" class="nav-link">
                        <ion-icon name="home-outline"></ion-icon>
                        <span>首頁</span>
                    </a>
                    <a href="settings.html" class="nav-link">
                        <ion-icon name="settings-outline"></ion-icon>
                        <span>設定</span>
                    </a>
                    <a href="logout.html" class="nav-link">
                        <ion-icon name="log-out-outline"></ion-icon>
                        <span>登出</span>
                    </a>
                </div>
            </div>
        </nav>

        <!-- 主內容區域 -->
        <main class="main-content">
            <div class="chat-container">
                <div class="chat-sidebar">
                    <div class="chat-header">
                        <h2>聊天室</h2>
                        <button id="createRoomBtn" class="btn-primary">
                            <ion-icon name="add-outline"></ion-icon>
                            新建聊天室
                        </button>
                    </div>
                    <div id="roomList" class="room-list"></div>
                </div>
                <div class="chat-main">
                    <div class="chat-header">
                        <h2 id="currentRoomName">選擇聊天室</h2>
                        <button id="showMembersBtn" class="btn-secondary">
                            <ion-icon name="people-outline"></ion-icon>
                            成員列表
                        </button>
                    </div>
                    <div id="messagesContainer" class="messages-container"></div>
                    <div class="message-input-container">
                        <textarea id="messageInput" placeholder="輸入訊息..." rows="1"></textarea>
                        <button id="sendMessageBtn" class="btn-primary">
                            <ion-icon name="send-outline"></ion-icon>
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 創建聊天室模態框 -->
    <div id="createRoomModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>創建聊天室</h2>
                <button class="close-modal">&times;</button>
            </div>
            <form id="createRoomForm">
                <div class="form-group">
                    <label for="roomName">聊天室名稱</label>
                    <input type="text" id="roomName" required>
                </div>
                <div class="form-group">
                    <label for="roomType">聊天室類型</label>
                    <select id="roomType">
                        <option value="private">私人聊天室</option>
                        <option value="group">群組聊天室</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="roomMembers">選擇成員</label>
                    <select id="roomMembers" multiple>
                        <!-- 成員列表將由 JavaScript 動態填充 -->
                    </select>
                </div>
                <button type="submit" class="btn-primary">創建</button>
            </form>
        </div>
    </div>

    <!-- 成員列表模態框 -->
    <div id="membersModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>聊天室成員</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div id="membersList" class="members-list">
                <!-- 成員列表將由 JavaScript 動態填充 -->
            </div>
        </div>
    </div>

    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script src="js/chat.js"></script>
    <script>
    // 載入 localStorage 頭像
    window.addEventListener('DOMContentLoaded', function() {
        const avatar = localStorage.getItem('profileAvatar');
        if (avatar) {
            var img = document.getElementById('home-avatar');
            if (img) img.src = avatar;
        }
    });
    </script>
</body>
</html> 